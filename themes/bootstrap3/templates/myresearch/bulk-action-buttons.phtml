<?php if (isset($list)): ?>
  <input type="hidden" name="listID" value="<?=$this->escapeHtmlAttr($list->id)?>">
  <input type="hidden" name="listName" value="<?=$this->escapeHtmlAttr($list->title)?>">
<?php endif; ?>
<?php $user = $this->auth()->isLoggedIn(); ?>
<nav class="bulkActionButtons">
  <?php
  $socialConfig = $this->config()->get('config')['Social'];
  $multiPageSelection = $socialConfig['multi_page_selection'] ?? false;
  $checkboxSelectAllType = $socialConfig['checkbox_select_all_type'] ?? 'none';
  ?>
  <?php if(in_array($checkboxSelectAllType, ['on_page', 'both'])): ?>
    <div class="bulk-checkbox">
      <input type="checkbox" name="selectAll" class="checkbox-select-all" id="myresearchCheckAll">
      <label for="myresearchCheckAll"><?=$this->transEsc('select_all_on_page')?></label>
    </div>
  <?php endif; ?>
  <?php if($multiPageSelection && in_array($checkboxSelectAllType, ['global', 'both'])): ?>
    <div class="bulk-checkbox">
      <input type="checkbox" name="selectAllGlobal" class="checkbox-select-all-global" id="myresearchCheckAllGlobal">
      <label for="myresearchCheckAllGlobal"><?=$this->transEsc('select_all')?></label>
    </div>
  <?php endif; ?>
  <ul class="action-toolbar">
    <?=
      $this->bulkAction()->button(
          'email',
          'send-email',
          'Email',
          [
            'title' => $this->translate('bulk_email_myresearch'),
          ]
      )
    ?>
    <?php if ((null !== $this->list && $this->list->editAllowed($user)) || null === $this->list && $user): ?>
      <?=
        $this->bulkAction()->button(
            'delete',
            'ui-delete',
            'Delete',
            [
              'id' => $this->idPrefix . 'delete_list_items_' . (null !== $this->list ? $this->escapeHtmlAttr($this->list->id) : ''),
              'title' => $this->translate('bulk_delete_myresearch'),
            ]
        )
      ?>
    <?php endif; ?>
    <?php $exportOptions = $this->export()->getActiveFormats('bulk'); ?>
    <?php if (count($exportOptions) > 0): ?>
      <?=
        $this->bulkAction()->button(
            'export',
            'export',
            'Export',
            [
              'title' => $this->translate('bulk_export_myresearch'),
            ]
        )
      ?>
    <?php endif; ?>
    <?=
      $this->bulkAction()->button(
          'print',
          'print',
          'Print',
          [
            'title' => $this->translate('bulk_print_myresearch'),
            'data-lightbox-ignore' => '',
          ]
      )
    ?>
    <?php if ($this->cart()->isActive()): ?>
      <?=
        $this->bulkAction()->button(
            'add',
            'cart-add',
            'Add to Book Bag',
            [
              'id' => $this->idPrefix . 'updateCart',
            ]
        )
      ?>
    <?php endif; ?>
  </ul>
</nav>
